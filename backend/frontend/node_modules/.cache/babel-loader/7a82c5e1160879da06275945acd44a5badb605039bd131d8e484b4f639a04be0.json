{"ast":null,"code":"import React,{useState,useEffect,useProps}from'react';import{useNavigate,useLocation,useParams,Link}from'react-router-dom';import{Form,Button,Row,Col,Table}from'react-bootstrap';import Loader from'../components/Loader';import Message from'../components/Message';import{useDispatch,useSelector}from'react-redux';import FormContainer from'../components/FormContainer';import{listUsers,deleteUser}from'../actions/userActions';import{LinkContainer}from'react-router-bootstrap';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';import Paginate from'../components/Paginate';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function ProductListScreen(){var _useParams=useParams(),id=_useParams.id;var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products,pages=productList.pages,page=productList.page;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var navigate=useNavigate();var location=useLocation();var keyword=location.search;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){navigate(\"/login\");}if(successCreate){navigate(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts(keyword));}},[dispatch,navigate,userInfo,successDelete,successCreate,keyword]);var deleteHandler=function deleteHandler(id,name){if(window.confirm(\"Czy na pewno chcesz usun\\u0105\\u0107 ten produkt \".concat(name,\" ?\"))){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(\"h1\",{className:\"text-4xl text-center mb-5\",children:[\"Produkty w sklepie (\",products.length,\")\"]})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsx(Button,{className:\"my-3\",onClick:createProductHandler,children:\"Dodaj produkt\"})})]}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),errorDelete&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorDelete}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{varint:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-center \",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Nazwa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ilo\\u015B\\u0107\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Cena\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kategoria\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marka\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"text-center\",children:products.map(function(product){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(product._id),children:product.name})}),/*#__PURE__*/_jsx(\"td\",{children:product.countInStock}),/*#__PURE__*/_jsxs(\"td\",{children:[product.price,\" z\\u0142\"]}),/*#__PURE__*/_jsx(\"td\",{children:product.category}),/*#__PURE__*/_jsx(\"td\",{children:product.brand}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{varinat:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-regular fa-pen-to-square text-lime-500\"})})}),/*#__PURE__*/_jsx(Button,{varinat:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id,product.name);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash-can text-red-500\"})})]})]},product._id);})})]}),/*#__PURE__*/_jsx(Paginate,{page:page,pages:pages,isAdmin:true,keyword:keyword})]})]});}export default ProductListScreen;","map":{"version":3,"names":["React","useState","useEffect","useProps","useNavigate","useLocation","useParams","Link","Form","Button","Row","Col","Table","Loader","Message","useDispatch","useSelector","FormContainer","listUsers","deleteUser","LinkContainer","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","Paginate","jsxs","_jsxs","jsx","_jsx","ProductListScreen","_useParams","id","dispatch","productList","state","loading","error","products","pages","page","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","navigate","location","keyword","search","type","isAdmin","concat","_id","deleteHandler","name","window","confirm","createProductHandler","children","className","length","onClick","variant","varint","striped","bordered","hover","responsive","map","to","countInStock","price","category","brand","varinat","class"],"sources":["C:/Users/Krystian/Documents/GitHub/ecommerce/backend/frontend/src/screens/ProductListScreen.js"],"sourcesContent":["import React, {useState, useEffect, useProps} from 'react'\r\nimport { useNavigate, useLocation, useParams, Link} from 'react-router-dom'\r\nimport {Form, Button, Row, Col, Table} from 'react-bootstrap'\r\nimport Loader from '../components/Loader';\r\nimport Message from '../components/Message';\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport FormContainer from '../components/FormContainer';\r\nimport {listUsers, deleteUser} from '../actions/userActions'\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport {listProducts, deleteProduct, createProduct} from '../actions/productActions'\r\nimport {PRODUCT_CREATE_RESET} from '../constants/productConstants'\r\nimport Paginate from '../components/Paginate';\r\n\r\nfunction ProductListScreen() {\r\n    const { id } = useParams()\r\n\r\n    const dispatch = useDispatch()\r\n    \r\n\r\n    const productList = useSelector(state => state.productList)\r\n    const {loading, error, products, pages, page} = productList\r\n\r\n    const productDelete = useSelector(state => state.productDelete)\r\n    const {loading:loadingDelete, error:errorDelete, success:successDelete} = productDelete\r\n\r\n    const productCreate = useSelector(state => state.productCreate)\r\n    const {loading:loadingCreate, error:errorCreate, success:successCreate, product: createdProduct} = productCreate\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const {userInfo} = userLogin\r\n\r\n\r\n    const navigate = useNavigate()\r\n    const location = useLocation()\r\n\r\n    let keyword = location.search\r\n\r\n    useEffect(() => {\r\n        dispatch({type: PRODUCT_CREATE_RESET})\r\n\r\n        if(!userInfo.isAdmin){\r\n            navigate(`/login`)\r\n        }\r\n        \r\n        if(successCreate){\r\n            navigate(`/admin/product/${createdProduct._id}/edit`)\r\n        }else{\r\n            dispatch(listProducts(keyword))\r\n        }\r\n\r\n    }, [dispatch, navigate, userInfo, successDelete, successCreate, keyword])\r\n\r\n\r\n\r\n    const deleteHandler = (id, name) => {\r\n        if(window.confirm(`Czy na pewno chcesz usunąć ten produkt ${name} ?`)){\r\n            dispatch(deleteProduct(id))\r\n        }\r\n    } \r\n\r\n    const createProductHandler = () => {\r\n        dispatch(createProduct())\r\n    }\r\n\r\n  return (\r\n    <div>\r\n        \r\n        <Row className=\"align-items-center\">\r\n            <Col>\r\n                <h1 className=\"text-4xl text-center mb-5\" >Produkty w sklepie ({products.length})</h1>\r\n            </Col>\r\n            <Col className=\"text-right\">\r\n                <Button className=\"my-3\" onClick={createProductHandler}>\r\n                    Dodaj produkt\r\n                </Button>\r\n            </Col>\r\n        </Row>\r\n\r\n        {loadingDelete && <Loader />}\r\n        {errorDelete && <Message variant='danger'>{errorDelete}</Message>}\r\n\r\n        {loadingCreate && <Loader />}\r\n        {errorCreate && <Message variant='danger'>{errorCreate}</Message>}\r\n\r\n        {loading\r\n        ? <Loader />\r\n        : error\r\n            ?<Message varint='danger'>{error}</Message>\r\n            :(\r\n\r\n                <div>\r\n                    <Table striped bordered hover responsive className=\"table-sm\">\r\n                        <thead className=\"text-center \">\r\n                            <tr>\r\n                                <th>Id</th>\r\n                                <th>Nazwa</th>\r\n                                <th>Ilość</th>\r\n                                <th>Cena</th>\r\n                                <th>Kategoria</th>\r\n                                <th>Marka</th>\r\n                                <th></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"text-center\">\r\n                            {products.map(product => (\r\n                                <tr key={product._id}>\r\n                                    <td>{product._id}</td>\r\n                                    <td><Link to={`/product/${product._id}`}>{product.name}</Link></td>\r\n                                    <td>{product.countInStock}</td>\r\n                                    <td>{product.price} zł</td>\r\n                                    <td>{product.category}</td>\r\n                                    <td>{product.brand}</td>\r\n                                    \r\n                                    <td >\r\n                                        <LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n                                            <Button varinat='light' className=\"btn-sm\"><i class=\"fa-regular fa-pen-to-square text-lime-500\"></i></Button>\r\n                                        </LinkContainer>\r\n\r\n                                        <Button varinat='danger' className=\"btn-sm\" onClick={() => deleteHandler(product._id, product.name)}><i class=\"fa-solid fa-trash-can text-red-500\"></i></Button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </Table>\r\n                    <Paginate page={page} pages={pages} isAdmin={true} keyword={keyword}/>\r\n                </div>\r\n            )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductListScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}