{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Krystian/Documents/GitHub/ecommerce/backend/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useEffect}from'react';import{Route,Link,useParams,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,ListGroup,Image,Form,Button,Card}from'react-bootstrap';import Message from'../components/Message';import{addToCart,removeFromCart}from'../actions/cartActions';import queryString from'query-string';import axios from'axios';import{useLocation}from'react-router-dom';import'../index.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CartScreen(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var location=useLocation();var qty=location.search?Number(location.search.split('=')[1]):1;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});var cartItems=cart.cartItems;useEffect(function(){if(id){dispatch(addToCart(id,qty));}},[dispatch,id,qty]);var removeFromCartHandler=function removeFromCartHandler(id){dispatch(removeFromCart(id));};var checkoutHandler=function checkoutHandler(){if(userInfo){navigate('/shipping');}else{navigate('/login');}};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl text-center mb-5\",children:\"Tw\\xF3j koszyk\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"info\",children:[\" Tw\\xF3j koszyk jest pusty \",/*#__PURE__*/_jsx(Link,{to:'/',children:\" Powr\\xF3t do strony g\\u0142\\xF3wnej\"}),\" \"]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[item.price,\" z\\u0142\"]}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product,Number(e.target.value)));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})}),/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeFromCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{class:\"fa-solid fa-trash-can\"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center text-2xl\",children:[\"Podsumowanie: \",/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm\",children:[cartItems.reduce(function(acc,item){return acc+item.qty;},0),\" przedmiot\\xF3w\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-base\",children:[\"Razem: \",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2),\" z\\u0142 \"]})]}),/*#__PURE__*/_jsx(ListGroup.Item,{className:\"text-center\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Przejd\\u017A do kasy\"})})]})})})]});}export default CartScreen;","map":{"version":3,"names":["React","useEffect","Route","Link","useParams","useNavigate","useDispatch","useSelector","Row","Col","ListGroup","Image","Form","Button","Card","Message","addToCart","removeFromCart","queryString","axios","useLocation","jsx","_jsx","jsxs","_jsxs","CartScreen","_useParams","id","navigate","location","qty","search","Number","split","userLogin","state","userInfo","dispatch","cart","cartItems","removeFromCartHandler","checkoutHandler","children","md","className","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","product","price","Control","as","value","onChange","e","target","_toConsumableArray","Array","countInStock","keys","x","type","onClick","class","reduce","acc","toFixed","disabled"],"sources":["C:/Users/Krystian/Documents/GitHub/ecommerce/backend/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, {useEffect} from 'react'\r\nimport {Route, Link, useParams, useNavigate} from 'react-router-dom'\r\nimport {useDispatch, useSelector} from 'react-redux'\r\nimport {Row, Col, ListGroup, Image, Form, Button, Card} from 'react-bootstrap'\r\nimport Message from '../components/Message'\r\nimport {addToCart, removeFromCart} from '../actions/cartActions'\r\nimport queryString from 'query-string'\r\nimport axios from 'axios'\r\nimport { useLocation } from 'react-router-dom'\r\nimport '../index.css'\r\n\r\nfunction CartScreen() {\r\n    const {id} = useParams()\r\n    const navigate = useNavigate();\r\n\r\n\r\n    const location = useLocation()\r\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n    const userLogin = useSelector((state) => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n    const {cartItems} = cart\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if(id){\r\n            dispatch(addToCart(id, qty))\r\n        }\r\n    }, [dispatch, id, qty])\r\n\r\n    const removeFromCartHandler = (id) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n\r\n    const checkoutHandler = () => {\r\n        if (userInfo) {\r\n            navigate('/shipping')\r\n          } else {\r\n            navigate('/login')\r\n          }\r\n    }\r\n\r\n\r\n  return (\r\n    <Row>\r\n        <Col md={8}>\r\n            <h1 className=\"text-5xl text-center mb-5\">Twój koszyk</h1>\r\n            {cartItems.length === 0 ? (\r\n                <Message variant=\"info\"> Twój koszyk jest pusty <Link to={'/'}> Powrót do strony głównej</Link> </Message>\r\n            ) : (\r\n                <ListGroup variant='flush'>\r\n                    {cartItems.map(item => (\r\n                        <ListGroup.Item key={item.product} >\r\n                            <Row>\r\n                                <Col md={2}>\r\n                                    <Image src={item.image} alt={item.name} fluid rounded/>\r\n                                </Col>\r\n                                <Col md={3}>\r\n                                    <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                </Col>\r\n                                <Col md={2}>\r\n                                    {item.price} zł\r\n                                </Col>\r\n                                <Col md={1}>\r\n                                    <Form.Control as='select' value={item.qty} onChange={(e) => dispatch(addToCart(item.product, \r\n                                        Number(e.target.value)))}>\r\n                                        {\r\n                                            [...Array(item.countInStock).keys()].map((x) => (\r\n                                                <option key={x + 1} value={x + 1} >\r\n                                                    {x + 1}\r\n                                                </option>\r\n                                            ))}\r\n                                    </Form.Control>\r\n                                </Col>\r\n                                <Col md={1}>\r\n                                    <Button type='button' variant='light' onClick={() => removeFromCartHandler(item.product)}>\r\n                                        <i class=\"fa-solid fa-trash-can\"></i>\r\n                                    </Button>\r\n                                </Col>\r\n\r\n                            </Row>\r\n                        </ListGroup.Item>\r\n                    ))}\r\n                </ListGroup>\r\n            )\r\n        }\r\n        </Col>\r\n        <Col md={4}>\r\n            <Card>\r\n                <ListGroup variant='flush'>\r\n                    <ListGroup.Item>\r\n                        <h2 className=\"text-center text-2xl\">Podsumowanie: <p className=\"text-sm\">{cartItems.reduce((acc, item) =>acc + item.qty, 0)} przedmiotów</p></h2>\r\n                        <span className=\"text-base\">Razem: {cartItems.reduce((acc, item) =>acc + item.qty * item.price, 0).toFixed(2)} zł </span>\r\n                    </ListGroup.Item>\r\n                    <ListGroup.Item className=\"text-center\">\r\n                        <Button type='button' className=\"btn-block\" disabled={cartItems.length === 0} onClick={checkoutHandler}>\r\n                            Przejdź do kasy\r\n                        </Button>\r\n                    </ListGroup.Item>\r\n                </ListGroup>\r\n            </Card>\r\n        </Col>\r\n    </Row>\r\n  )\r\n}\r\n\r\n\r\nexport default CartScreen\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}